<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js">
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
            transition: background-color 0.3s;
        }
        .dark-mode {
            background-color: #333;
            color: white;
        }
        .calculator {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
            position: relative; /* –î–ª—è —Ñ–æ–Ω–∞ */
            overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ */
        }
        .dark-mode .calculator {
            background-color: #444;
        }
        .calculator:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1494789602883-1d36b6a7c20c') no-repeat center center / cover; /* –§–æ–Ω */
            opacity: 0.1; /* –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ñ–æ–Ω–∞ */
            z-index: -1; /* –ü–æ–∑–∞–¥–∏ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        }
        input, select {
            margin: 10px 0;
            padding: 10px;
            width: 100%;
            border-radius: 5px;
            border: 1px solid #ccc;
            transition: border-color 0.3s;
        }
        input:focus {
            border-color: #007bff;
            outline: none;
        }
        button {
            padding: 10px;
            width: 100%;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        .toggle-container {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
            margin: 20px 0;
        }
        .toggle-container input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-label {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            border-radius: 30px;
            transition: background-color 0.3s;
        }
        .toggle-label:before {
            position: absolute;
            content: '';
            height: 26px;
            width: 26px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        input:checked + .toggle-label {
            background-color: #007bff;
        }
        input:checked + .toggle-label:before {
            transform: translateX(30px);
        }
        #themeIcon {
            position: absolute;
            top: 50%;
            left: 5px;
            transform: translateY(-50%);
            font-size: 16px;
            transition: color 0.3s;
        }
        .dark-mode #themeIcon {
            color: white;
        }
        .graph-section {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
        <div class="toggle-container">
            <span id="themeIcon">üåû</span>
            <input type="checkbox" id="themeSwitch">
            <label class="toggle-label" for="themeSwitch"></label>
        </div>
        <div>
            <h2>–û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
            <input type="number" id="num1" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ">
            <input type="number" id="num2" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ">
            <select id="operation">
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="*">*</option>
                <option value="/">/</option>
            </select>
            <button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
            <p id="result">–†–µ–∑—É–ª—å—Ç–∞—Ç: </p>
        </div>
        <div>
            <h2>–°–ª–æ–∂–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π</h2>
            <input type="text" id="fraction1" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤—É—é –¥—Ä–æ–±—å (–ø—Ä–∏–º–µ—Ä: 1/2)">
            <input type="text" id="fraction2" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—Ç–æ—Ä—É—é –¥—Ä–æ–±—å (–ø—Ä–∏–º–µ—Ä: 1/3)">
            <select id="fractionOperation">
                <option value="+">+</option>
                <option value="-">-</option>
                <option value="*">*</option>
                <option value="/">/</option>
            </select>
            <button onclick="calculateFractions()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
            <p id="fractionResult">–†–µ–∑—É–ª—å—Ç–∞—Ç: </p>
        </div>
        <div>
            <h2>–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è</h2>
            <input type="number" id="angle" placeholder="–í–≤–µ–¥–∏—Ç–µ —É–≥–æ–ª (–≥—Ä–∞–¥—É—Å—ã)">
            <select id="trigOperation">
                <option value="sin">sin</option>
                <option value="cos">cos</option>
                <option value="tan">tan</option>
            </select>
            <button onclick="calculateTrigonometry()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
            <p id="trigResult">–†–µ–∑—É–ª—å—Ç–∞—Ç: </p>
        </div>
        <div class="graph-section">
            <h2>–ì—Ä–∞—Ñ–∏–∫ —Ñ—É–Ω–∫—Ü–∏–∏</h2>
            <input type="text" id="functionInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, x*x)">
            <button onclick="drawGraph()">–ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫</button>
            <canvas id="myChart" width="400" height="400"></canvas>
            <h2>–¢–æ—á–∫–∞ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ</h2>
            <input type="number" id="xCoord" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É X">
            <input type="number" id="yCoord" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É Y">
            <button onclick="plotPoint()">–ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å —Ç–æ—á–∫—É</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function calculate() {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            const operation = document.getElementById('operation').value;
            let result;

            switch (operation) {
                case '+':
                    result = num1 + num2;
                    break;
                case '-':
                    result = num1 - num2;
                    break;
                case '*':
                    result = num1 * num2;
                    break;
                case '/':
                    result = num2 !== 0 ? num1 / num2 : '–û—à–∏–±–∫–∞: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å';
                    break;
                default:
                    result = '–ù–µ–≤–µ—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è';
            }

            document.getElementById('result').textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}`;
        }

        function calculateFractions() {
            const fraction1 = document.getElementById('fraction1').value.split('/');
            const fraction2 = document.getElementById('fraction2').value.split('/');
            let numerator1 = parseInt(fraction1[0]);
            let denominator1 = parseInt(fraction1[1]);
            let numerator2 = parseInt(fraction2[0]);
            let denominator2 = parseInt(fraction2[1]);
            const operation = document.getElementById('fractionOperation').value;
            let resultNumerator, resultDenominator;

            switch (operation) {
                case '+':
                    resultNumerator = numerator1 * denominator2 + numerator2 * denominator1;
                    resultDenominator = denominator1 * denominator2;
                    break;
                case '-':
                    resultNumerator = numerator1 * denominator2 - numerator2 * denominator1;
                    resultDenominator = denominator1 * denominator2;
                    break;
                case '*':
                    resultNumerator = numerator1 * numerator2;
                    resultDenominator = denominator1 * denominator2;
                    break;
                case '/':
                    resultNumerator = numerator1 * denominator2;
                    resultDenominator = denominator1 * numerator2;
                    break;
                default:
                    resultNumerator = 0;
                    resultDenominator = 1;
            }

            document.getElementById('fractionResult').textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${resultNumerator}/${resultDenominator}`;
        }

        function calculateTrigonometry() {
            const angle = parseFloat(document.getElementById('angle').value);
            const operation = document.getElementById('trigOperation').value;
            let result;

            const radians = angle * (Math.PI / 180);

            switch (operation) {
                case 'sin':
                    result = Math.sin(radians);
                    break;
                case 'cos':
                    result = Math.cos(radians);
                    break;
                case 'tan':
                    result = Math.tan(radians);
                    break;
                default:
                    result = '–ù–µ–≤–µ—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è';
            }

            document.getElementById('trigResult').textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}`;
        }

        function drawGraph() {
            const ctx = document.getElementById('myChart').getContext('2d');
            const func = document.getElementById('functionInput').value;
            const xValues = Array.from({ length: 200 }, (_, i) => i / 10 - 10);
            const yValues = xValues.map(x => eval(func.replace(/x/g, x)));

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xValues,
                    datasets: [{
                        label: '–ì—Ä–∞—Ñ–∏–∫',
                        data: yValues,
                        borderColor: 'rgba(75, 192, 192, 1)',
                        fill: false,
                    }],
                },
                options: {
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'X'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Y'
                            }
                        }
                    }
                }
            });
        }

        function plotPoint() {
            const x = parseFloat(document.getElementById('xCoord').value);
            const y = parseFloat(document.getElementById('yCoord').value);
            const ctx = document.getElementById('myChart').getContext('2d');

            // –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è —Ç–æ—á–∫–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
            const xValues = Array.from({ length: 200 }, (_, i) => i / 10 - 10);
            const yValues = xValues.map(x => 0); // –ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏

            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: '–¢–æ—á–∫–∞',
                        data: [{ x: x, y: y }],
                        backgroundColor: 'rgba(255, 0, 0, 1)',
                        pointRadius: 5,
                    }],
                },
                options: {
                    scales: {
                        x: {
                            min: -10,
                            max: 10,
                        },
                        y: {
                            min: -10,
                            max: 10,
                        }
                    }
                }
            });
        }

        const themeSwitch = document.getElementById('themeSwitch');
        themeSwitch.addEventListener('change', () => {
            document.body.classList.toggle('dark-mode');
            document.getElementById('themeIcon').textContent = themeSwitch.checked ? 'üåô' : 'üåû';
        });
    </script>
</body>
</html>
